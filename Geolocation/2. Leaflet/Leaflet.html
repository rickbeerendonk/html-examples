<!DOCTYPE html>
<!-- European Union Public License version 1.2 -->
<!-- Copyright © 2019 Rick Beerendonk -->
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="author" content="Rick Beerendonk" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <title>Current Position in Google Maps</title>

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
      integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
      integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
      crossorigin=""
    ></script>

    <style>
      html,
      body,
      #map {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <script>
      function init() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            positionCallback,
            positionErrorCallback,
            { enableHighAccuracy: true }
          );
        } else {
          alert('Your browser does not support HTML5 geolocation.');
        }
      }

      function positionCallback(position) {
        const pos = [position.coords.latitude, position.coords.longitude];

        var map = L.map('map').setView(pos, 13);

        L.marker(pos)
          .addTo(map);
      }

      function positionErrorCallback(error) {
        alert('Error ' + error.code + ', ' + error.message);
      }

      //window.addEventListener('load', init, true);
    </script>
  </head>
  <body>
    <div id="map" onclick="init()">Click to see position.</div>
  </body>
</html>
